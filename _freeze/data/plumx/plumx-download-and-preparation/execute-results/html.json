{
  "hash": "a5d72f905e58294050819a239a516abc",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Download and prepare data from PlumX API\"\nengine: knitr\n---\n\n\nFirst we select the list of DOIs:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(RefManageR)\nlibrary(purrr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'purrr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:base':\n\n    %||%\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(foreach)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'foreach'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:purrr':\n\n    accumulate, when\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(jsonlite)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'jsonlite'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:purrr':\n\n    flatten\n```\n\n\n:::\n\n```{.r .cell-code}\nhere::i_am(\"data/plumx/plumx-download-and-preparation.qmd\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nhere() starts at /home/jferrer/proyectos/personal/español\n```\n\n\n:::\n\n```{.r .cell-code}\nbib1 <- ReadBib(here::here(\"bibTeX\",\"peer-review.bibtex\"), check = FALSE)\n\nCRediT_folder <- \"data\"\ncredit <-read_excel(here::here(CRediT_folder, \"CRediT-my-publications.xlsx\"), \n                    \"Contributions per pub\") \ndois <- credit |> filter(!is.na(doi)) |> pull(doi)\n\nconn <- file(here::here(\"data/plumx/\",\"doi-list\"), \"w\")\nwriteLines(dois,conn)\nclose(conn)\n```\n:::\n\n\n\nNow we run this to query plumx API (need to run this in the UNSW network to get access to the service, VPN is not enough):\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nsource ~/.Renviron\n\nfor doi in $(cat doi-list)\ndo\n  sdoi=query-$(echo $doi | sed -e s/\\\\//_/g).json\n  if [ -e $sdoi ]\n  then\n      echo \"skipping $doi\"\n  else\n      wget --output-document=${sdoi} https://api.elsevier.com/analytics/plumx/doi/${doi}?apiKey=${Elsevier_API}\n  fi\ndone\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n--2024-11-07 11:37:17--  https://api.elsevier.com/analytics/plumx/doi/10.1038/s41598-024-52133-0?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 273 [application/json]\nSaving to: ‘query-10.1038_s41598-024-52133-0.json’\n\n     0K                                                       100% 5.46M=0s\n\n2024-11-07 11:37:17 (5.46 MB/s) - ‘query-10.1038_s41598-024-52133-0.json’ saved [273/273]\n\n--2024-11-07 11:37:17--  https://api.elsevier.com/analytics/plumx/doi/10.1038/s41559-023-02320-5?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 545 [application/json]\nSaving to: ‘query-10.1038_s41559-023-02320-5.json’\n\n     0K                                                       100% 6.49M=0s\n\n2024-11-07 11:37:18 (6.49 MB/s) - ‘query-10.1038_s41559-023-02320-5.json’ saved [545/545]\n\n--2024-11-07 11:37:18--  https://api.elsevier.com/analytics/plumx/doi/10.1016/j.ecolind.2024.111790?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 374 [application/json]\nSaving to: ‘query-10.1016_j.ecolind.2024.111790.json’\n\n     0K                                                       100% 9.66M=0s\n\n2024-11-07 11:37:18 (9.66 MB/s) - ‘query-10.1016_j.ecolind.2024.111790.json’ saved [374/374]\n\n--2024-11-07 11:37:18--  https://api.elsevier.com/analytics/plumx/doi/10.1002/ece3.11404?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 228 [application/json]\nSaving to: ‘query-10.1002_ece3.11404.json’\n\n     0K                                                       100% 9.78M=0s\n\n2024-11-07 11:37:18 (9.78 MB/s) - ‘query-10.1002_ece3.11404.json’ saved [228/228]\n\n--2024-11-07 11:37:18--  https://api.elsevier.com/analytics/plumx/doi/10.1017/S0030605323001771?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 238 [application/json]\nSaving to: ‘query-10.1017_S0030605323001771.json’\n\n     0K                                                       100% 1.43G=0s\n\n2024-11-07 11:37:19 (1.43 GB/s) - ‘query-10.1017_S0030605323001771.json’ saved [238/238]\n\n--2024-11-07 11:37:19--  https://api.elsevier.com/analytics/plumx/doi/10.2305/cjdf9122?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 367 [application/json]\nSaving to: ‘query-10.2305_cjdf9122.json’\n\n     0K                                                       100% 9.69M=0s\n\n2024-11-07 11:37:19 (9.69 MB/s) - ‘query-10.2305_cjdf9122.json’ saved [367/367]\n\n--2024-11-07 11:37:19--  https://api.elsevier.com/analytics/plumx/doi/10.1111/cobi.13995?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 395 [application/json]\nSaving to: ‘query-10.1111_cobi.13995.json’\n\n     0K                                                       100% 4.70M=0s\n\n2024-11-07 11:37:20 (4.70 MB/s) - ‘query-10.1111_cobi.13995.json’ saved [395/395]\n\n--2024-11-07 11:37:20--  https://api.elsevier.com/analytics/plumx/doi/10.1111/cobi.14169?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 509 [application/json]\nSaving to: ‘query-10.1111_cobi.14169.json’\n\n     0K                                                       100% 12.9M=0s\n\n2024-11-07 11:37:20 (12.9 MB/s) - ‘query-10.1111_cobi.14169.json’ saved [509/509]\n\n--2024-11-07 11:37:20--  https://api.elsevier.com/analytics/plumx/doi/10.1038/s41467-023-43760-8?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 281 [application/json]\nSaving to: ‘query-10.1038_s41467-023-43760-8.json’\n\n     0K                                                       100% 11.3M=0s\n\n2024-11-07 11:37:20 (11.3 MB/s) - ‘query-10.1038_s41467-023-43760-8.json’ saved [281/281]\n\n--2024-11-07 11:37:20--  https://api.elsevier.com/analytics/plumx/doi/10.35249/rche.48.2.22.05?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 155 [application/json]\nSaving to: ‘query-10.35249_rche.48.2.22.05.json’\n\n     0K                                                       100%  213M=0s\n\n2024-11-07 11:37:21 (213 MB/s) - ‘query-10.35249_rche.48.2.22.05.json’ saved [155/155]\n\n--2024-11-07 11:37:21--  https://api.elsevier.com/analytics/plumx/doi/10.1093/ornithology/ukab076?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 392 [application/json]\nSaving to: ‘query-10.1093_ornithology_ukab076.json’\n\n     0K                                                       100% 4.48M=0s\n\n2024-11-07 11:37:21 (4.48 MB/s) - ‘query-10.1093_ornithology_ukab076.json’ saved [392/392]\n\n--2024-11-07 11:37:21--  https://api.elsevier.com/analytics/plumx/doi/10.1038/s41586-022-05318-4?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 682 [application/json]\nSaving to: ‘query-10.1038_s41586-022-05318-4.json’\n\n     0K                                                       100% 4.48M=0s\n\n2024-11-07 11:37:21 (4.48 MB/s) - ‘query-10.1038_s41586-022-05318-4.json’ saved [682/682]\n\n--2024-11-07 11:37:21--  https://api.elsevier.com/analytics/plumx/doi/10.3390/d13050191?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 509 [application/json]\nSaving to: ‘query-10.3390_d13050191.json’\n\n     0K                                                       100% 15.0M=0s\n\n2024-11-07 11:37:22 (15.0 MB/s) - ‘query-10.3390_d13050191.json’ saved [509/509]\n\n--2024-11-07 11:37:22--  https://api.elsevier.com/analytics/plumx/doi/10.7717/peerj.11612?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 302 [application/json]\nSaving to: ‘query-10.7717_peerj.11612.json’\n\n     0K                                                       100% 8.95M=0s\n\n2024-11-07 11:37:22 (8.95 MB/s) - ‘query-10.7717_peerj.11612.json’ saved [302/302]\n\n--2024-11-07 11:37:22--  https://api.elsevier.com/analytics/plumx/doi/10.3390/d13120611?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 302 [application/json]\nSaving to: ‘query-10.3390_d13120611.json’\n\n     0K                                                       100% 3.95M=0s\n\n2024-11-07 11:37:23 (3.95 MB/s) - ‘query-10.3390_d13120611.json’ saved [302/302]\n\n--2024-11-07 11:37:23--  https://api.elsevier.com/analytics/plumx/doi/10.21068/A2022FSNIX.13?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 404 Not Found\n2024-11-07 11:37:23 ERROR 404: Not Found.\n\n--2024-11-07 11:37:23--  https://api.elsevier.com/analytics/plumx/doi/10.1186/s42522-021-00036-9?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 453 [application/json]\nSaving to: ‘query-10.1186_s42522-021-00036-9.json’\n\n     0K                                                       100% 13.5M=0s\n\n2024-11-07 11:37:24 (13.5 MB/s) - ‘query-10.1186_s42522-021-00036-9.json’ saved [453/453]\n\n--2024-11-07 11:37:24--  https://api.elsevier.com/analytics/plumx/doi/10.1111/conl.12680?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 570 [application/json]\nSaving to: ‘query-10.1111_conl.12680.json’\n\n     0K                                                       100% 3.71M=0s\n\n2024-11-07 11:37:24 (3.71 MB/s) - ‘query-10.1111_conl.12680.json’ saved [570/570]\n\n--2024-11-07 11:37:24--  https://api.elsevier.com/analytics/plumx/doi/10.1017/S0959270919000522?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 392 [application/json]\nSaving to: ‘query-10.1017_S0959270919000522.json’\n\n     0K                                                       100% 17.2M=0s\n\n2024-11-07 11:37:24 (17.2 MB/s) - ‘query-10.1017_S0959270919000522.json’ saved [392/392]\n\n--2024-11-07 11:37:24--  https://api.elsevier.com/analytics/plumx/doi/10.12933/therya-20-891?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 389 [application/json]\nSaving to: ‘query-10.12933_therya-20-891.json’\n\n     0K                                                       100% 4.69M=0s\n\n2024-11-07 11:37:25 (4.69 MB/s) - ‘query-10.12933_therya-20-891.json’ saved [389/389]\n\n--2024-11-07 11:37:25--  https://api.elsevier.com/analytics/plumx/doi/10.1016/j.biocon.2020.108834?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 490 [application/json]\nSaving to: ‘query-10.1016_j.biocon.2020.108834.json’\n\n     0K                                                       100% 21.6M=0s\n\n2024-11-07 11:37:25 (21.6 MB/s) - ‘query-10.1016_j.biocon.2020.108834.json’ saved [490/490]\n\n--2024-11-07 11:37:25--  https://api.elsevier.com/analytics/plumx/doi/10.2305/IUCN.CH.2020.13.en?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 663 [application/json]\nSaving to: ‘query-10.2305_IUCN.CH.2020.13.en.json’\n\n     0K                                                       100% 3.19M=0s\n\n2024-11-07 11:37:26 (3.19 MB/s) - ‘query-10.2305_IUCN.CH.2020.13.en.json’ saved [663/663]\n\n--2024-11-07 11:37:26--  https://api.elsevier.com/analytics/plumx/doi/10.1111/conl.12623?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 600 [application/json]\nSaving to: ‘query-10.1111_conl.12623.json’\n\n     0K                                                       100% 3.30M=0s\n\n2024-11-07 11:37:26 (3.30 MB/s) - ‘query-10.1111_conl.12623.json’ saved [600/600]\n\n--2024-11-07 11:37:26--  https://api.elsevier.com/analytics/plumx/doi/10.1111/conl.12666?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 517 [application/json]\nSaving to: ‘query-10.1111_conl.12666.json’\n\n     0K                                                       100% 5.58M=0s\n\n2024-11-07 11:37:26 (5.58 MB/s) - ‘query-10.1111_conl.12666.json’ saved [517/517]\n\n--2024-11-07 11:37:26--  https://api.elsevier.com/analytics/plumx/doi/10.1002/ece3.3628?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 302 [application/json]\nSaving to: ‘query-10.1002_ece3.3628.json’\n\n     0K                                                       100% 3.74M=0s\n\n2024-11-07 11:37:27 (3.74 MB/s) - ‘query-10.1002_ece3.3628.json’ saved [302/302]\n\n--2024-11-07 11:37:27--  https://api.elsevier.com/analytics/plumx/doi/10.1016/s1002-0160(18)60029-3?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 399 [application/json]\nSaving to: ‘query-10.1016_s1002-0160(18)60029-3.json’\n\n     0K                                                       100% 4.31M=0s\n\n2024-11-07 11:37:27 (4.31 MB/s) - ‘query-10.1016_s1002-0160(18)60029-3.json’ saved [399/399]\n\n--2024-11-07 11:37:27--  https://api.elsevier.com/analytics/plumx/doi/10.12933/therya-18-616?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 510 [application/json]\nSaving to: ‘query-10.12933_therya-18-616.json’\n\n     0K                                                       100% 22.1M=0s\n\n2024-11-07 11:37:28 (22.1 MB/s) - ‘query-10.12933_therya-18-616.json’ saved [510/510]\n\n--2024-11-07 11:37:28--  https://api.elsevier.com/analytics/plumx/doi/10.1016/j.biocon.2016.09.027?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 433 [application/json]\nSaving to: ‘query-10.1016_j.biocon.2016.09.027.json’\n\n     0K                                                       100% 5.52M=0s\n\n2024-11-07 11:37:28 (5.52 MB/s) - ‘query-10.1016_j.biocon.2016.09.027.json’ saved [433/433]\n\n--2024-11-07 11:37:28--  https://api.elsevier.com/analytics/plumx/doi/10.1016/j.prevetmed.2016.11.023?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 501 [application/json]\nSaving to: ‘query-10.1016_j.prevetmed.2016.11.023.json’\n\n     0K                                                       100% 22.0M=0s\n\n2024-11-07 11:37:28 (22.0 MB/s) - ‘query-10.1016_j.prevetmed.2016.11.023.json’ saved [501/501]\n\n--2024-11-07 11:37:28--  https://api.elsevier.com/analytics/plumx/doi/10.1007/s10841-016-9886-6?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 447 [application/json]\nSaving to: ‘query-10.1007_s10841-016-9886-6.json’\n\n     0K                                                       100% 5.43M=0s\n\n2024-11-07 11:37:29 (5.43 MB/s) - ‘query-10.1007_s10841-016-9886-6.json’ saved [447/447]\n\n--2024-11-07 11:37:29--  https://api.elsevier.com/analytics/plumx/doi/10.1016/j.jaridenv.2016.04.007?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 397 [application/json]\nSaving to: ‘query-10.1016_j.jaridenv.2016.04.007.json’\n\n     0K                                                       100% 17.0M=0s\n\n2024-11-07 11:37:29 (17.0 MB/s) - ‘query-10.1016_j.jaridenv.2016.04.007.json’ saved [397/397]\n\n--2024-11-07 11:37:29--  https://api.elsevier.com/analytics/plumx/doi/10.1111/acv.12106?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 388 [application/json]\nSaving to: ‘query-10.1111_acv.12106.json’\n\n     0K                                                       100% 4.72M=0s\n\n2024-11-07 11:37:30 (4.72 MB/s) - ‘query-10.1111_acv.12106.json’ saved [388/388]\n\n--2024-11-07 11:37:30--  https://api.elsevier.com/analytics/plumx/doi/10.1016/j.biocon.2013.07.032?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 493 [application/json]\nSaving to: ‘query-10.1016_j.biocon.2013.07.032.json’\n\n     0K                                                       100% 19.6M=0s\n\n2024-11-07 11:37:30 (19.6 MB/s) - ‘query-10.1016_j.biocon.2013.07.032.json’ saved [493/493]\n\n--2024-11-07 11:37:30--  https://api.elsevier.com/analytics/plumx/doi/10.1371/journal.pone.0110236?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 494 [application/json]\nSaving to: ‘query-10.1371_journal.pone.0110236.json’\n\n     0K                                                       100% 5.97M=0s\n\n2024-11-07 11:37:30 (5.97 MB/s) - ‘query-10.1371_journal.pone.0110236.json’ saved [494/494]\n\n--2024-11-07 11:37:30--  https://api.elsevier.com/analytics/plumx/doi/10.1371/journal.pone.0063570?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 610 [application/json]\nSaving to: ‘query-10.1371_journal.pone.0063570.json’\n\n     0K                                                       100% 13.2M=0s\n\n2024-11-07 11:37:31 (13.2 MB/s) - ‘query-10.1371_journal.pone.0063570.json’ saved [610/610]\n\n--2024-11-07 11:37:31--  https://api.elsevier.com/analytics/plumx/doi/10.1111/ddi.12012?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 423 [application/json]\nSaving to: ‘query-10.1111_ddi.12012.json’\n\n     0K                                                       100% 5.38M=0s\n\n2024-11-07 11:37:31 (5.38 MB/s) - ‘query-10.1111_ddi.12012.json’ saved [423/423]\n\n--2024-11-07 11:37:31--  https://api.elsevier.com/analytics/plumx/doi/10.15517/rbt.v61i1.10941?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 363 [application/json]\nSaving to: ‘query-10.15517_rbt.v61i1.10941.json’\n\n     0K                                                       100% 15.5M=0s\n\n2024-11-07 11:37:31 (15.5 MB/s) - ‘query-10.15517_rbt.v61i1.10941.json’ saved [363/363]\n\n--2024-11-07 11:37:31--  https://api.elsevier.com/analytics/plumx/doi/10.1676/11-057.1?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 383 [application/json]\nSaving to: ‘query-10.1676_11-057.1.json’\n\n     0K                                                       100% 14.4M=0s\n\n2024-11-07 11:37:32 (14.4 MB/s) - ‘query-10.1676_11-057.1.json’ saved [383/383]\n\n--2024-11-07 11:37:32--  https://api.elsevier.com/analytics/plumx/doi/10.1017/S0030605308006996?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.58.61, 104.16.57.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.58.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 398 [application/json]\nSaving to: ‘query-10.1017_S0030605308006996.json’\n\n     0K                                                       100% 17.0M=0s\n\n2024-11-07 11:37:32 (17.0 MB/s) - ‘query-10.1017_S0030605308006996.json’ saved [398/398]\n\n--2024-11-07 11:37:32--  https://api.elsevier.com/analytics/plumx/doi/10.1098/rsbl.2003.0015?apiKey=00e71c285d3f2fe74a3754d9220a3c59\nLoaded CA certificate '/etc/ssl/certs/ca-certificates.crt'\nResolving api.elsevier.com (api.elsevier.com)... 104.16.57.61, 104.16.58.61\nConnecting to api.elsevier.com (api.elsevier.com)|104.16.57.61|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 420 [application/json]\nSaving to: ‘query-10.1098_rsbl.2003.0015.json’\n\n     0K                                                       100% 4.92M=0s\n\n2024-11-07 11:37:33 (4.92 MB/s) - ‘query-10.1098_rsbl.2003.0015.json’ saved [420/420]\n```\n\n\n:::\n:::\n\n\n\n\nLet's wrap the process in a couple of functions:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nf <- function(x) {\n  tibble(!!x$name := x$total) \n}\nreadPlumxJson <- function(x) {\n  if(file.info(x)$size>0) {\n    qry <- read_json(x)\n  vls <- map(qry$count_categories, \n             function(x) {\n               totals <- f(x) \n               counts <- map(x$count_types,f)\n               bind_cols(totals, counts)\n             }) |> bind_cols()\n  rslts <- tibble(doi = qry$id_value) %>% bind_cols(vls)\n  }\n  else {\n    rslts <- tibble()\n  }\n  rslts\n}\n```\n:::\n\n\n\nRead files from folder and `map` function:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplumx_folder <- here::here(\"data/plumx/\")\njsonFiles <- dir(plumx_folder, pattern = \"json$\", full.names = TRUE)\nPMX_ALL <- map(jsonFiles, readPlumxJson) |> bind_rows()\n```\n:::\n\n\n\nSave this to a folder:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrds_folder <- \"data\"\nsaveRDS(PMX_ALL,here::here(rds_folder,\"plumx_ALL.rds\")) \n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}